---
import LanguageSelector from "@components/languageselector.astro";
import { menuitems } from "@components/navbar/navbar.astro";
import ThemeSelector from "@components/themeselector.astro";
import logo from "assets/logo.svg";

// Add new built-in i18n imports
import { getLangFromUrl, useTranslations } from "../i18n/utils";
import { getRelativeLocaleUrl } from "astro:i18n";

// Get current language and create translation function
const safeUrl = Astro.url || new URL('/', Astro.site || 'http://localhost:4321');
const lang = getLangFromUrl(safeUrl);
const t = useTranslations(lang);

// Helper function to create localized paths
function localizePath(path: string) {
	if (!path || (path && path.startsWith('http')) || path === '#') return path;
	return getRelativeLocaleUrl(lang, path);
}
---

<footer class="pb-12 pt-8 dark:bg-stone-950">
	<div class="mx-auto max-w-6xl px-6 md:px-12 lg:px-6 xl:px-0">
		
		<ul role="list" class="flex flex-wrap items-center justify-center gap-4 py-4 text-gray-600 dark:text-white sm:gap-8">
			<li role="listitem">
				<a href={localizePath("/")} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">Home</a>
			</li>
			<li role="listitem">
				<a href={localizePath("/about")} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">About Us</a>
			</li>
			<li role="listitem">
				<a href={localizePath("/contact")} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">Contact Us</a>
			</li>
			<li role="listitem">
				<a href={localizePath("/privacy-policy")} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">Privacy Policy</a>
			</li>
			
			{
				menuitems.map(
					(item) =>
						item &&
						item.path && (
							<li role="listitem">
								<a href={localizePath(item.path)} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">
									{t(item.title)}
								</a>
							</li>
						)
				)
			}
		</ul>
		
		
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "WebSite",
			"name": "MusicalDown",
			"alternateName": "MusicalDown TikTok Downloader | Download Video TikTok Without Watermark Online",
			"url": "https://musicaldown.online",
			"description": "MusicalDown is a powerful TikTok downloader that lets you save TikTok videos without watermark in HD quality. MusicallyDown - Download TikTok videos in MP4",
			"potentialAction": {
				"@type": "SearchAction",
				"target": {
					"@type": "EntryPoint",
					"urlTemplate": "https://musicaldown.online/?url={search_term_string}"
				},
				"query-input": "required name=search_term_string"
			},
			"inLanguage": "en-US"
		}
		</script>
		
		<!-- 2. Organization Schema -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "Organization",
			"name": "MusicalDown",
			"url": "https://musicaldown.online",
			"logo": "https://musicaldown.online/apple-touch-icon.webp",
			"image": "https://musicaldown.online/meta/opengraph.webp",
			"description": "MusicalDown is a powerful TikTok downloader that lets you save TikTok videos without watermark in HD quality. MusicallyDown - Download TikTok videos in MP4",
			"email": "contact@musicaldown.online",
			"sameAs": [
				"https://x.com/TikTokio_cam"
			],
			"contactPoint": {
				"@type": "ContactPoint",
				"contactType": "Customer Support",
				"email": "contact@musicaldown.online"
			}
		}
		</script>
		
		<!-- 3. WebApplication Schema -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "WebApplication",
			"name": "MusicalDown",
			"alternateName": "Musicaldown - TikTok Video Downloader",
			"url": "https://musicaldown.online",
			"image": "https://musicaldown.online/images/logo.svg",
			"applicationCategory": "MultimediaApplication",
			"applicationSubCategory": "Video Downloader",
			"operatingSystem": "Web Browser, Windows, Linux, iOS, Android, macOS",
			"browserRequirements": "Requires JavaScript. Requires HTML5.",
			"featureList": [
				"Download TikTok videos without watermark",
				"Tiktok Video Downloader Online",
				"Musicaldown",
				"Tiktok Downloader",
				"Unlimited free downloads",
				"Musically"
			],
			"offers": {
				"@type": "Offer",
				"price": "0.00",
				"priceCurrency": "USD"
			},
			"aggregateRating": {
				"@type": "AggregateRating",
				"ratingValue": "4.6",
				"ratingCount": "8173",
				"bestRating": "5",
				"worstRating": "1"
			}
		}
		</script>
		
		<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [{
    "@type": "Question",
    "name": "Is MusicallyDown legal to use?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "Yes, the Musicaldown itself is legal. However, how you use TikToko downloaded video must comply with copyright laws and TikTok terms of service."
    }
  },{
    "@type": "Question",
    "name": "Can I download private TikTok videos using Musicaldown?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "Unfortunately - No, MusicallyDown only works with publicly available content. Private account videos cannot be accessed or downloaded."
    }
  },{
    "@type": "Question",
    "name": "Do TikTok Video downloads expire?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "No, once you have downloaded TikTok video by sing musicaldown to your device, its yours to keep. The file doesnt expire or become inaccessible."
    }
  },{
    "@type": "Question",
    "name": "Is there a download limit per day to download TikTok Videos?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "No, Musicaldown offers unlimited TikTok downloads without daily restrictions or caps."
    }
  },{
    "@type": "Question",
    "name": "Does MusicalDown work on iOS devices?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "Yes, the Musicaldown works through mobile browsers on iOS devices. For iOS 12 or earlier, using the Documents by Readdle app may improve the download experience."
    }
  },{
    "@type": "Question",
    "name": "Can I download TikTok live streams with Musicallydown?",
    "acceptedAnswer": {
      "@type": "Answer",
      "text": "TikTok Live streams cannot be downloaded while they are broadcasting. However, if the stream is saved to the creator profile after ending, it can then be downloaded like any other TikTok video."
    }
  }]
}
</script>
		
		<!-- Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-C33KK2QQG5"></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-C33KK2QQG5');
		</script>
		
		<!-- Social Media Links -->
		<div class="m-auto mt-4 flex w-max items-center justify-between space-x-4 text-gray-500 dark:text-white">
			<a class="duration-300 hover:text-gray-900 dark:hover:text-gray-100" 
			   href="https://x.com/tiktokio_cam" 
			   title="Follow us on Twitter" 
			   target="_blank" 
			   rel="noopener noreferrer"
			   aria-label="Follow MusicalDown on Twitter">
				<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="m-auto h-5 w-5" viewBox="0 0 16 16">
					<path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path>
				</svg>
			</a>
			<a class="duration-300 hover:text-gray-900 dark:hover:text-gray-100" 
			   href="https://www.facebook.com/profile.php?id=61587763782077" 
			   title="Follow us on Facebook" 
			   target="_blank" 
			   rel="noopener noreferrer"
			   aria-label="Follow MusicalDown on Facebook">
				<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="m-auto w-5" viewBox="0 0 16 16">
					<path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"></path>
				</svg>
			</a>
			
		</div>
		
		<!-- Copyright -->
		<div class="mt-4 text-center">
			<span class="text-sm tracking-wide text-gray-500 dark:text-white">
				Copyright Â© MusicalDown 2026. All rights reserved
			</span>
		</div>
	</div>
</footer>
